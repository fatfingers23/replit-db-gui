import{j as $,e as p,a2 as y,a3 as x,a4 as A,a5 as B,a6 as C,a as I,a7 as q,a1 as w,a8 as D,k as F,q as O}from"./index.e2c7bcbb.js";import{g,h as T,s as E,i as L,n as R,f as M}from"./lazy.f2ba3b05.js";import{m as j,f as N,V as W}from"./VOverlay.574a7f82.js";const X=$({name:"VDialogTransition",props:{target:Object},setup(s,u){let{slots:t}=u;const l={onBeforeEnter(e){e.style.pointerEvents="none",e.style.visibility="hidden"},async onEnter(e,i){var d;await new Promise(c=>requestAnimationFrame(c)),await new Promise(c=>requestAnimationFrame(c)),e.style.visibility="";const{x:n,y:a,sx:r,sy:f,speed:o}=V(s.target,e),v=g(e,[{transform:`translate(${n}px, ${a}px) scale(${r}, ${f})`,opacity:0},{transform:""}],{duration:225*o,easing:T});(d=b(e))==null||d.forEach(c=>{g(c,[{opacity:0},{opacity:0,offset:.33},{opacity:1}],{duration:225*2*o,easing:E})}),v.finished.then(()=>i())},onAfterEnter(e){e.style.removeProperty("pointer-events")},onBeforeLeave(e){e.style.pointerEvents="none"},async onLeave(e,i){var d;await new Promise(c=>requestAnimationFrame(c));const{x:n,y:a,sx:r,sy:f,speed:o}=V(s.target,e);g(e,[{transform:""},{transform:`translate(${n}px, ${a}px) scale(${r}, ${f})`,opacity:0}],{duration:125*o,easing:L}).finished.then(()=>i()),(d=b(e))==null||d.forEach(c=>{g(c,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*o,easing:E})})},onAfterLeave(e){e.style.removeProperty("pointer-events")}};return()=>s.target?p(x,y({name:"dialog-transition"},l,{css:!1}),t):p(x,{name:"dialog-transition"},t)}});function b(s){var u;const t=(u=s.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:u.children;return t&&[...t]}function V(s,u){const t=s.getBoundingClientRect(),l=R(u),[e,i]=getComputedStyle(u).transformOrigin.split(" ").map(S=>parseFloat(S)),[d,n]=getComputedStyle(u).getPropertyValue("--v-overlay-anchor-origin").split(" ");let a=t.left+t.width/2;d==="left"||n==="left"?a-=t.width/2:(d==="right"||n==="right")&&(a+=t.width/2);let r=t.top+t.height/2;d==="top"||n==="top"?r-=t.height/2:(d==="bottom"||n==="bottom")&&(r+=t.height/2);const f=t.width/l.width,o=t.height/l.height,v=Math.max(1,f,o),c=f/v||0,h=o/v||0,m=l.width*l.height/(window.innerWidth*window.innerHeight),P=m>.12?Math.min(1.5,(m-.12)*10+1):1;return{x:a-(e+l.left),y:r-(i+l.top),sx:c,sy:h,speed:P}}function Y(){const u=A("useScopeId").vnode.scopeId;return{scopeId:u?{[u]:""}:void 0}}const U=B()({name:"VDialog",props:{fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...j({origin:"center center",scrollStrategy:"block",transition:{component:X},zIndex:2400})},emits:{"update:modelValue":s=>!0},setup(s,u){let{slots:t}=u;const l=C(s,"modelValue"),{scopeId:e}=Y(),i=I();function d(n){var a,r;const f=n.relatedTarget,o=n.target;if(f!==o&&(a=i.value)!=null&&a.contentEl&&(r=i.value)!=null&&r.globalTop&&![document,i.value.contentEl].includes(o)&&!i.value.contentEl.contains(o)){const v=[...i.value.contentEl.querySelectorAll('button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])')].filter(m=>!m.hasAttribute("disabled")&&!m.matches('[tabindex="-1"]'));if(!v.length)return;const c=v[0],h=v[v.length-1];f===c?h.focus():c.focus()}}return q&&w(()=>l.value&&s.retainFocus,n=>{n?document.addEventListener("focusin",d):document.removeEventListener("focusin",d)},{immediate:!0}),w(l,async n=>{if(await D(),n){var a;(a=i.value.contentEl)==null||a.focus({preventScroll:!0})}else{var r;(r=i.value.activatorEl)==null||r.focus({preventScroll:!0})}}),F(()=>{const[n]=N(s);return p(W,y({ref:i,class:["v-dialog",{"v-dialog--fullscreen":s.fullscreen,"v-dialog--scrollable":s.scrollable}]},n,{modelValue:l.value,"onUpdate:modelValue":a=>l.value=a,"aria-role":"dialog","aria-modal":"true",activatorProps:y({"aria-haspopup":"dialog","aria-expanded":String(l.value)},s.activatorProps)},e),{activator:t.activator,default:function(){for(var a,r=arguments.length,f=new Array(r),o=0;o<r;o++)f[o]=arguments[o];return p(O,{root:!0},{default:()=>[(a=t.default)==null?void 0:a.call(t,...f)]})}})}),M({},i)}});export{U as V,Y as u};
